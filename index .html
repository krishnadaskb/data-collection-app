<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/index.css.css">
  <title>Data Collection App</title>

</head>
<body>
  <div class="container" >
    <h1><span style="color: rgb(80, 199, 1);">Data</span><span style="color: rgb(18, 2, 92);"> Co</span><span style="color: rgb(59, 116, 3);">lle</span><spans style="color: chocolate;">ction </spans><span style="color: rgb(0, 131, 131);">App</span></h1>
    <form id="crud-form">
      <input type="text" id="name" placeholder="Enter name" required>
      <input type="email" id="email" placeholder="Enter email" required>
      <input type="text" id="city" placeholder="Enter city">
      <button type="submit">Add</button>
    </form>

    <table>
      <thead>
        <tr style="color: white;">
          <th>Name</th>
          <th>Email</th>
          <th>City</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody id="table-body"></tbody>
    </table>
  </div>

  <script>
    const form = document.getElementById("crud-form");
    const nameInput = document.getElementById("name");
    const emailInput = document.getElementById("email");
    const cityInput = document.getElementById("city");
    const tableBody = document.getElementById("table-body");

    let data = JSON.parse(localStorage.getItem("crudData")) || [];
    let editIndex = null;

    function renderTable() {
      tableBody.innerHTML = "";
      data.forEach((item, index) => {
        const row = `
          <tr>
            <td>${item.name}</td>
            <td>${item.email}</td>
            <td>${item.city}</td>
            <td>
              <button onclick="editData(${index})">Edit</button>
              <button onclick="deleteData(${index})">Delete</button>
            </td>
          </tr>
        `;
        tableBody.innerHTML += row;
      });
      localStorage.setItem("crudData", JSON.stringify(data));
    }

    form.addEventListener("submit", function (e) {
      e.preventDefault();
      const name = nameInput.value.trim();
      const email = emailInput.value.trim();
      const city = cityInput.value.trim();

      if (editIndex !== null) {
        data[editIndex] = { name, email, city };
        editIndex = null;
      } else {
        data.push({ name, email, city });
      }

      form.reset();
      renderTable();
    });

    window.editData = function (index) {
      const item = data[index];
      nameInput.value = item.name;
      emailInput.value = item.email;
      cityInput.value = item.city;
      editIndex = index;
    };

    window.deleteData = function (index) {
      if (confirm("Are you sure you want to delete this record?")) {
        data.splice(index, 1);
        renderTable();
      }
    };

    renderTable();
  </script>
</body>
</html>
